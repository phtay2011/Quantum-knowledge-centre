<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-nz" xml:lang="en-nz" class="_Skins_HTML5_Left_FIS" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../" data-mc-has-content-body="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="References|Formulas in Analytics">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="Expires" content="0" />
        <meta http-equiv="Pragma" content="no-cache" />
        <meta http-equiv="Cache-Control" content="no-cache" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Average Interest Rate Formulas</title>
        <link href="../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" />
        <link href="../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" />
        <link href="../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" />
        <link href="../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" />
        <link href="../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" />
        <link href="../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" />
        <link href="Resources/Stylesheets/stylesheet.css" rel="stylesheet" />
        <script src="../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../Resources/Scripts/require.min.js" defer="defer">
        </script>
        <script src="../Resources/Scripts/require.config.js" defer="defer">
        </script>
        <script src="../Resources/Scripts/foundation.6.2.3_custom.js" defer="defer">
        </script>
        <script src="../Resources/Scripts/plugins.min.js" defer="defer">
        </script>
        <script src="../Resources/Scripts/MadCapAll.js" defer="defer">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-left" role="navigation" id="offCanvas" data-off-canvas="" data-position="left" data-mc-ignore="true">
                    <ul class="off-canvas-accordion vertical menu off-canvas-list" data-accordion-menu="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1150px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-dropdown" style="display:none;" id="#centralSmallScreen"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="166520.htm" title="FIS" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                    <div class="central-dropdown" style="display:none;" id="#centralTop"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                    <div class="central-dropdown" style="display:none;"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <div class="nocontent">
                                        <div class="MCBreadcrumbsBox_bodytext_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider="   &gt;   " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix"> </span>
                                        </div>
                                    </div>
                                    <div role="main" id="mc-main-content">
                                        <h1>Average Interest Rate Formulas</h1>
                                        <p class="bodytext">You can calculate an average interest rate using the SONIA / SOFR formula or the Geometric Average Return formula. The AverageInterestRate function calculates the average of a given interest rate over a specified period, and has the following syntax:</p>
                                        <p class="bodytextindent"><code class="monospace">AverageInterestRate(</code><em class="emphasis">ccy</em>, <em class="emphasis">rate_name</em>, <em class="emphasis">start_date</em>, <em class="emphasis">end_date</em>, <em class="emphasis">as_at_date</em> [, <em class="emphasis">term</em>, <em class="emphasis">term_type</em> [, <em class="emphasis">method, denominator, margin, suspension, holidays_list, intermediate_rounding, lag, lagtype</em>, <em>last_int_period_accrual_date</em>] ]<code class="monospace">)</code></p>
                                        <p class="bodytext">
                                            <br />... where:</p>
                                        <ul class="listbullet1">
                                            <li class="listbullet1" value="1"><em class="emphasis">ccy</em> is the currency linked to the Yield Rate to be averaged;</li>
                                            <li class="listbullet1" value="2"><em class="emphasis">rate_name</em> is a Yield Rate name which, together with <em class="emphasis">ccy</em>, determines the Yield Rate to be averaged;</li>
                                            <li class="listbullet1" value="3"><em class="emphasis">start_date</em> gives the start of the averaging period (the first rate record used in the calculation will have a Rate Date equal to or immediately preceding this date);</li>
                                            <li class="listbullet1" value="4"><em class="emphasis">end_date</em> gives the end of the averaging period (the last rate record used in the calculation will have a Rate Date equal to or immediately preceding this date);</li>
                                            <li class="listbullet1" value="5"><em class="emphasis">as_at_date</em> is the date used to select the appropriate data images, enabling users to recreate results from historical runs; should be consistent with the same argument within other Calculated Column functions; </li>
                                            <li class="listbullet1" value="6"><em class="emphasis">method</em> determines the averaging method used and is:<ul class="listbullet1"><li class="listbullet1" value="1"><strong class="boldcharstyle">G</strong> or <strong class="boldcharstyle">Geometric</strong> (the default) for the geometric mean (for compounding rates), or</li><li class="listbullet1" value="2"><strong class="boldcharstyle">A</strong> or <strong class="boldcharstyle">Arithmetic on Business Days</strong> for the weighted arithmetic mean (the sum of the rates multiplied by the number of days those rates are applied and divided by the number of calendar days in the period),</li><li class="listbullet1" value="3"><strong class="boldcharstyle">B </strong>or <strong class="boldcharstyle">BusinessGeometric </strong>is like Geometric but the compounding is applied on Business Days only: it applies simple interests formula on non business days, or</li><li class="listbullet1" value="4"><strong class="boldcharstyle">R </strong>or <strong class="boldcharstyle">ReturnGeometricAverage</strong>, that calculates the Geometric Average Return,</li><li class="listbullet1" value="5"><strong class="boldcharstyle">C </strong> or <strong class="boldcharstyle">Arithmetic on Calendar Days</strong> for the arithmetic mean (the sum of the rates divided by the number of rate).</li><li class="listbullet1" value="6">optional if <em class="emphasis">term</em> and <em class="emphasis">term_type</em> are present,</li><li class="listbullet1" value="7">not required (and must be absent) if <em class="emphasis">term</em> and <em class="emphasis">term_type</em> are absent;</li></ul></li>
                                            <li class="listbullet1" value="7"><em class="emphasis">margin </em>- margin to apply to the rate and to compound with the same frequency. Default value is zero (0).</li>
                                            <li class="listbullet1" value="8"><em class="emphasis">intermediate_rounding </em>– number of decimal digits used to round the intermediate rates using 5/4 rounding. Default value is -1, that means no intermediate rounding. When rounding percentages, remember to leave enough decimal places to express the value as a decimal and not as a percent. This parameter is ignored for "R" method. </li>
                                            <li class="listbullet1" value="9"><em class="emphasis">lag </em>- number of Business Days (k): for every day in the interest period we use the rate from k business days earlier.</li>
                                            <li class="listbullet1" value="10"><em class="emphasis">lagtype </em>-   <strong class="boldcharstyle">Rate Only </strong>(the default): Only the rate date is shifted, the day weights remain the ones from the interest period. <strong class="boldcharstyle">Rate &amp; Weight</strong>: The rate dates are shifted and the day weight are calculated on the new observation period</li>
                                            <li class="listbullet1" value="11"><em class="emphasis">term_type</em> is: <ul class="listbullet1"><li class="listbullet1" value="1"><strong class="boldcharstyle">Overnight</strong> (the default), <strong class="boldcharstyle">Tom Next</strong>, or a time unit (<strong class="boldcharstyle">Days</strong>, <strong class="boldcharstyle">Weeks</strong>, <strong class="boldcharstyle">Months</strong>, or <strong class="boldcharstyle">Years</strong>) that together with <em class="emphasis">term</em> gives the point on the Yield Rate curve for selecting the rate to be averaged,</li><li class="listbullet1" value="2">required if <em class="emphasis">term</em> is present,</li><li class="listbullet1" value="3">not required (and must be absent) if <em class="emphasis">term</em> is absent; and</li></ul></li>
                                            <li class="listbullet1" value="12"><em class="emphasis">term</em> is:<ul class="listbullet1"><li class="listbullet1" value="1">zero or a positive integer that together with <em class="emphasis">term_type</em> gives the point on the Yield Rate curve for selecting the rate to be averaged<strong class="boldcharstyle">*</strong>,</li><li class="listbullet1" value="2">optional (see <em class="emphasis">term_type</em>).<p class="tip-level-1-body"><span class="tipchar">TIP</span>: The applicable <em class="emphasis">mid rate</em> is used. This is the average of the <strong class="alertsonly-bold">Bid</strong> and <strong class="alertsonly-bold">Offer</strong> values in the Rates grid row with the matching <strong class="alertsonly-bold">Term</strong> and <strong class="alertsonly-bold">Term Type</strong> settings. If there is no matching row, an error will be reported.</p></li></ul></li>
                                            <li class="listbullet1" value="13"><em class="emphasis">denominator </em>- number of days per year (DPY). If not present or 0, this value is taken from the rate "Day Count". Ignored for "R" method.</li>
                                            <li class="listbullet1" value="14"><em class="emphasis">suspension </em>(or lockout) - number of Business Days (N), at the end of the interest period, for which the rate is constant and equal to the one fixed (N+1) Business Days before the period ends. Default is 0. </li>
                                            <li value="15">
                                                <p><em>last_int_period_accrual_date</em> – it is the last day of the whole coupon period that the interest is accrued. If not present its value is 0, otherwise its value should be equal to “Coupon End Date” – 1 Calendar Day. This date, together with end_date parameter, dictates how we use Suspension to calculate the Average Rate. (See <a href="#SuspensionInfo" class="MCXref xref" xrefformat="{paratext}">More information about suspension</a>)</p>
                                            </li>
                                            <li class="listbullet1" value="16"><em class="emphasis">holidays_list</em> - list of holidays: list of holiday centers separated by "|". For example, "GBP|London". If not present, the rate currency is used.</li>
                                            <li value="17">
                                                <p><em>last_int_period_accr_date</em> - the <span class="boldcharstyle">Last Interest Period Accrual Date</span> for the coupon period. This date, together with <em>end_date</em>, dictates how the system uses <span class="boldcharstyle">Suspension </span>to calculate the <span class="boldcharstyle">Average Rate</span>.</p>
                                            </li>
                                        </ul>
                                        <p class="bodytext">The averaging formulas are:</p>
                                        <p>
                                            <img src="Resources/Images/AQT-59701-formulas.PNG" />
                                        </p>
                                        <h2>Calculation Notes</h2>
                                        <ul class="listbullet1">
                                            <li class="listbullet1" value="1">Where Bid and Offer rates are available for a particular Term and Term Type, <em class="emphasis">R</em><sub class="subscript">i</sub> will be the mid rate or average of the two values</li>
                                            <li class="listbullet1" value="2">Where a rate record is missing for a date within the range (for example due to a non-business day), the preceding day's rate will be used. Where there is no available preceding rate, the first available rate will be back-filled.</li>
                                            <li class="listbullet1" value="3">For the <strong class="boldcharstyle">B </strong>(Geometric on Business) method, if the start date of the period falls on a Holiday: the applied rate is the one of the preceding Business Day; Term and Term Type are ignored; and Overnight is always used.</li>
                                            <li class="listbullet1" value="4">For <em>suspension</em>, to use the Tuesday rate when the last day of accruals is Sunday, use Suspension = 3 business days: Wednesday, Thursday, Friday.</li>
                                            <li class="listbullet1" value="5">For the <strong class="boldcharstyle">C </strong> calculation method (Average on Calendar Days) the Lag Type parameter is ignored. </li>
                                        </ul>
                                        <h2><a name="SuspensionInfo"></a>More information about <em>suspension</em></h2>
                                        <p>Start Suspension = Coupon End Date - Suspension (Business Days)</p>
                                        <p>If:</p>
                                        <ul>
                                            <li value="1"><em>end_date</em> is less than or equal to the Start Suspension date, then the system doesn't apply <em>suspension</em>.</li>
                                            <li value="2"><em>end_date</em> is greater than the Start Suspension date, then the system applies <em>suspension </em>and uses the rate at the Start Suspension date from then until the <em>end_date</em>, included.</li>
                                            <li value="3">If <em>lag </em>&gt; 0 and <em>lag_type</em> = “Rate &amp; Weight”, then the system maps the Start Suspension date to the observation period going back “lag” number of business days.</li>
                                        </ul>
                                        <p>The system takes the rate from the Business Day prior to the Start Suspension day and uses this rate on the Start Suspension day and onwards.</p>
                                        <p>
                                            <img src="Resources/Images/195477_1_Suspension4.png" />
                                        </p>
                                        <p>The diagram illustrates <em>lag </em>= 0 and/or <em>lag_type</em> = “Rate Only”:</p>
                                        <p>
                                            <img src="Resources/Images/195477_1_Suspension3.png" />
                                        </p>
                                        <p>The diagram illustrates <em>lag </em>&gt; 0 and <em>lag_type</em> = “Rate &amp; Weight”:</p>
                                        <p>
                                            <img src="Resources/Images/195477_1_Suspension2.png" />
                                        </p>
                                        <h2>Examples</h2>
                                        <p class="bodytext">For examples, see the Knowledge Center, <a id="h195948" title="AverageInterestRate" href="61387.htm#o188218" target="_self">AverageInterestRate</a>, examples 3 and 4. </p>
                                    </div>
                                    <p>&#160;</p>
                                    <p>&#160;</p>
                                    <p>&#160;</p>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>