<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-nz" xml:lang="en-nz" class="_Skins_HTML5_Left_FIS" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../" data-mc-has-content-body="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Processing|Electronic Messages (Processing)">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="Expires" content="0" />
        <meta http-equiv="Pragma" content="no-cache" />
        <meta http-equiv="Cache-Control" content="no-cache" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>EFT (Messages - Processing)</title>
        <link href="../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" />
        <link href="../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" />
        <link href="../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" />
        <link href="../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" />
        <link href="../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" />
        <link href="../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" />
        <link href="Resources/Stylesheets/stylesheet.css" rel="stylesheet" />
        <script src="../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../Resources/Scripts/require.min.js" defer="defer">
        </script>
        <script src="../Resources/Scripts/require.config.js" defer="defer">
        </script>
        <script src="../Resources/Scripts/foundation.6.2.3_custom.js" defer="defer">
        </script>
        <script src="../Resources/Scripts/plugins.min.js" defer="defer">
        </script>
        <script src="../Resources/Scripts/MadCapAll.js" defer="defer">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-left" role="navigation" id="offCanvas" data-off-canvas="" data-position="left" data-mc-ignore="true">
                    <ul class="off-canvas-accordion vertical menu off-canvas-list" data-accordion-menu="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1150px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-dropdown" style="display:none;" id="#centralSmallScreen"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="166520.htm" title="FIS" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                    <div class="central-dropdown" style="display:none;" id="#centralTop"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                    <div class="central-dropdown" style="display:none;"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <div class="nocontent">
                                        <div class="MCBreadcrumbsBox_bodytext_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider="   &gt;   " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix"> </span>
                                        </div>
                                    </div>
                                    <div role="main" id="mc-main-content">
                                        <h1>EFT (Messages - Processing)</h1>
                                        <p class="bodytext">Use the Processing &gt; Electronic Messages &gt; <a id="h194889" title="EFT Messages page" href="straightthroughprocessing_eftmessages.htm" target="_self">EFT Messages page</a> to:</p>
                                        <ul class="listbullet1">
                                            <li class="listbullet1" value="1">View all EFT messages output by an updating EFT Processing run, when SWIFT or a SWIFT-like Payment Method applies.<p class="tip-level-1-body"><span class="tipchar">TIP:</span> You can optionally filter the display by Deal Number/s, External reference/s, Message Date/s, or Net Number/s. In each case you can specify one or more filter values (separated by a comma). For example if you select <strong class="alertsonly-bold">External Reference</strong> and in the Filter value field enter <strong class="alertsonly-bold">AT,-739</strong> then only messages containing either <strong class="alertsonly-bold">AT</strong> or <strong class="alertsonly-bold">-739</strong> in the External Reference field will be displayed.</p></li>
                                            <li class="listbullet1" value="2">Create EFT Cancelation requests that will be explicitly output by an updating EFT Processing run, when using a Payment Method that allows Cancelation messages.<p class="listcontinue">These requests create an item in the EFT message queue. To send the Cancelation messages, you must explicitly run EFT Processing with suitable parameter settings to include the pending Cancelation messages - in particular, the <strong class="boldcharstyle">Cancel Requests</strong> option must be selected. Find this option when the <strong class="boldcharstyle">Payment Method</strong> has the <strong class="boldcharstyle">Enable cancelation Messages</strong> option selected.</p><p class="tip-level-1-body"><span class="tipchar">TIP:</span> Optionally, use <strong class="alertsonly-bold">Undo Request</strong> to remove selected Cancelation requests, provided processing of them has not yet started.</p></li>
                                            <li class="listbullet1" value="3">Create a new Free Format Text message based on a selected EFT message.</li>
                                        </ul>
                                        <h3 class="h4internal">MTn92 Cancellation message format changes</h3>
                                        <p class="bodytext">From 2019.4 (6.8.2), the format of the MTn92 Cancellation message is defined via the Layout file (EFTs) to cater for the SWIFT requirement to include UETR for these message types. The change included a new example header and detail:</p>
                                        <ul class="listbullet1">
                                            <li class="listbullet1" value="1">Header - ‘<code class="monospace">MTn92 Cancellation Example Header</code>’<p class="listcontinue"><img id="f197201" src="Resources/Images/mtn92header.png" class="linkedgraphic-agq" alt="12" height="212" width="599" vspace="2" hspace="2" align="bottom" border="0" /></p></li>
                                            <li class="listbullet1" value="2">Detail - ‘<code class="monospace">MTn92 Cancellation Example Detail</code>’<p class="listcontinue"><img id="f197200" src="Resources/Images/mtn92detail.png" class="linkedgraphic-agq" alt="11" height="149" width="595" vspace="2" hspace="2" align="bottom" border="0" /></p><p class="urllink-htmlonly10cm">See more: <a id="h178007" title="For EFT Output" href="177996.htm" target="_self">For EFT Output</a></p></li>
                                        </ul>
                                        <h3 class="h4internal">Formatted attribute</h3>
                                        <p class="bodytext">From 2019.4 (6.8.2), there is a <strong class="boldcharstyle">formatted</strong> attribute for header blocks. This attribute enables you to keep the string format intact, overriding the transformation to uppercase that is done in the header block via the <strong class="boldcharstyle">SeedXMLStylesheet_SWIFTFIN.xsl</strong> file.</p>
                                        <p class="bodytext">If <code class="monospace">formatted="yes"</code> exists for the header field, the system assumes the string is already formatted and does not convert to upper case - that is, the UETR value stays in lower case.</p>
                                        <p class="tip-level-1-body"><span class="tipchar">TIP:</span> The other way to keep values in lower case is to prefix them with <strong class="alertsonly-bold">121</strong>.</p>
                                        <p class="bodytext">Additionally in this release, cancellation messages continued to use a formatted message but also contained the UETR of the previous message.</p>
                                        <p class="procedureheading">To remove UETR from Cancellation messages</p>
                                        <p class="bodytext">In the Layout file (EFTs), if the previous message contained these values in Header Block 3:</p>
                                        <p class="bodytext"><code class="monospace">{3:\{111:001}{121:e7379c87-70e1-4901-a9b4-d18f4356d89c}}</code>
                                        </p>
                                        <p class="bodytext">as found in:</p>
                                        <p class="bodytext">
                                            <img id="f197202" src="Resources/Images/cancelationheaderstart.png" class="linkedgraphic-agq" alt="CancelationHeaderStart" height="330" width="867" vspace="2" hspace="2" align="bottom" border="0" />
                                        </p>
                                        <p class="bodytext">...then format the layout file for MTn92 User Header Block 3 as below. This setup may vary depending on the User Header Block 3 content of the previous message.</p>
                                        <p class="bodytext">
                                            <img id="f197203" src="Resources/Images/mtn92exception.png" class="linkedgraphic-agq" alt="MTn92Exception" height="204" width="596" vspace="2" hspace="2" align="bottom" border="0" />
                                        </p>
                                        <p class="bodytext">The text in the box reads:</p>
                                        <p class="bodytext"><code class="monospace">&lt;Extraction start_incl="{3:" end_excel="{121:" xpath="/eftformattedMessage" formatted="yes"/&gt;</code>
                                        </p>
                                        <p class="bodytext"><code class="monospace">&lt;Field id="end n92 HB 3" mandatory="yes") &lt;Field&gt; </code>
                                        </p>
                                        <p class="bodytext">The UETR in the output Cancellation message is now stripped as shown:</p>
                                        <p class="bodytext"><code class="monospace">{3:\{111:001}}</code>
                                        </p>
                                        <p class="bodytext">as found in:</p>
                                        <p class="bodytext">
                                            <img id="f197204" src="Resources/Images/cancelationheaderend.png" class="linkedgraphic-agq" alt="CancelationHeaderEnd" height="399" width="576" vspace="2" hspace="2" align="bottom" border="0" />
                                        </p>
                                    </div>
                                    <p>&#160;</p>
                                    <p>&#160;</p>
                                    <p>&#160;</p>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>