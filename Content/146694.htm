<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-nz" xml:lang="en-nz" class="_Skins_HTML5_Left_FIS" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../" data-mc-has-content-body="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="System Administration|Confirmation and EFT Setup and Administration|Common elements and attributes|Layout file elements and attributes">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="Expires" content="0" />
        <meta http-equiv="Pragma" content="no-cache" />
        <meta http-equiv="Cache-Control" content="no-cache" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>ExternalReference element, Layout XML Data record</title>
        <link href="../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" />
        <link href="../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" />
        <link href="../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" />
        <link href="../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" />
        <link href="../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" />
        <link href="../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" />
        <link href="Resources/Stylesheets/stylesheet.css" rel="stylesheet" />
        <script src="../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../Resources/Scripts/require.min.js" defer="defer">
        </script>
        <script src="../Resources/Scripts/require.config.js" defer="defer">
        </script>
        <script src="../Resources/Scripts/foundation.6.2.3_custom.js" defer="defer">
        </script>
        <script src="../Resources/Scripts/plugins.min.js" defer="defer">
        </script>
        <script src="../Resources/Scripts/MadCapAll.js" defer="defer">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-left" role="navigation" id="offCanvas" data-off-canvas="" data-position="left" data-mc-ignore="true">
                    <ul class="off-canvas-accordion vertical menu off-canvas-list" data-accordion-menu="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1150px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-dropdown" style="display:none;" id="#centralSmallScreen"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="166520.htm" title="FIS" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                    <div class="central-dropdown" style="display:none;" id="#centralTop"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                    <div class="central-dropdown" style="display:none;"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <div class="nocontent">
                                        <div class="MCBreadcrumbsBox_bodytext_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider="   &gt;   " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix"> </span>
                                        </div>
                                    </div>
                                    <div role="main" id="mc-main-content">
                                        <h1>ExternalReference element, Layout XML Data record</h1>
                                        <p class="bodytext">The presence of the <strong class="boldcharstyle">ExternalReference</strong> element (when it is used as recommended below) will ensure that the <strong class="boldcharstyle">External Reference</strong> field in the <span class="VariablesChcAGQ_S">Quantum</span> database has the same value as that output.</p>
                                        <p class="bodytext">The <strong class="boldcharstyle">External Reference</strong> field is used when updating the Confirmation match status and message statuses. Without the <strong class="boldcharstyle">ExternalReference</strong> block, any truncation or manipulation on output will cause a mismatch and the match status and message status may therefore not be updated.</p>
                                        <p class="bodytext">For example, the default output for External Reference is made up from Transaction Type, Deal Number, and Message ID, so that for FX deal number <strong class="boldcharstyle">12345</strong> with a Message ID of <strong class="boldcharstyle">45678</strong>, field 20C would be output as:</p>
                                        <p class="bodytextindent"><strong class="boldcharstyle">:20C:FX12345-45678</strong>
                                        </p>
                                        <p class="bodytext">As deal numbers and message IDs increase, this field can be truncated if you are using SWIFT, which typically allows 16 characters for the external reference fields (other payment systems allow only 14 characters or less as their external reference).</p>
                                        <p class="bodytext">If you modify the External Reference in the output files created - for example, using only Transaction Type and Message ID (giving <strong class="boldcharstyle">:20:FX45678</strong> for the example above) - the external reference saved back to the database will reflect that change providing you implement one of the following setups.</p>
                                        <h3 class="h3internal">1. Recommended Setup (Confirmations and EFTs)</h3>
                                        <ul class="listbullet1">
                                            <li class="listbullet1" value="1">In the Layout record:<ul class="listbullet1"><li class="listbullet1" value="1">An <strong class="boldcharstyle">Include Document</strong> element specifies an <strong class="boldcharstyle">Includes</strong> record - for example:<p class="listcontinue2"><code class="monospace">&lt;IncludeDocument href="MyIncludes.xml"/&gt;</code></p></li><li class="listbullet1" value="2">An <strong class="boldcharstyle">ExternalReference</strong> block (after <strong class="boldcharstyle">GlobalAttributes</strong> and before <strong class="boldcharstyle">Header</strong>) specifies an <strong class="boldcharstyle">Include id</strong> - for example: <p class="listcontinue2"><code class="monospace">&lt;ExternalReference&gt;</code><br />&#160;<code class="monospace">&lt;Section&gt;</code><br />&#160;&#160;<code class="monospace">&lt;Field id="External Reference"&gt;</code><br />&#160;&#160;<code class="monospace">&lt;Include id="ExternalReferenceConfo"&gt;</code><br />&#160;<code class="monospace">&lt;Section&gt;</code><br /><code class="monospace">&lt;/ExternalReference&gt;</code></p></li></ul><p class="listcontinue">-<em class="emphasis">and</em>-</p></li>
                                            <li class="listbullet1" value="2">In the <strong class="boldcharstyle">Includes</strong> file, an <strong class="boldcharstyle">IncludeItem</strong> element defines that <strong class="boldcharstyle">Include id</strong> , which specifies the field format to be output <em class="emphasis">and</em> saved to the database as the unique reference - for example:<p class="listcontinue"><code class="monospace">&lt;IncludeItem id="ExternalReferenceConfo"&gt;</code><br />&#160;<code class="monospace">&lt;Section&gt;</code><br />&#160;&#160;<code class="monospace">&lt;Field id="External Reference"&gt;</code><br />&#160;&#160;&#160;<code class="monospace">&lt;Combination&gt;</code><br />&#160;&#160;&#160;&#160;<code class="monospace">&lt;FieldItem mandatory="yes" xpath="/confirmation/action/deal/transactionType</code>/&gt;<br />&#160;&#160;&#160;&#160;<code class="monospace">&lt;Combination separator="-"&gt;</code><br />&#160;&#160;&#160;&#160;&#160;<code class="monospace">&lt;FieldItem mandatory="yes" xpath="/confirmation/action/deal/dealNumber</code>/&gt;<br />&#160;&#160;&#160;&#160;&#160;<code class="monospace">&lt;FieldItem mandatory="yes" xpath="/confirmation/action/deal/messageId</code>/&gt;<br />&#160;&#160;&#160;&#160;<code class="monospace">&lt;/Combination&gt;</code><br />&#160;&#160;&#160;<code class="monospace">&lt;/Combination&gt;</code><br />&#160;&#160;<code class="monospace">&lt;/Field&gt;</code><br />&#160;<code class="monospace">&lt;/Section&gt;</code><br /><code class="monospace">&lt;IncludeItem&gt;</code></p><p class="listcontinue">-<em class="emphasis">and</em>-</p></li>
                                            <li class="listbullet1" value="3">In the Layout record for the output field definition, an <strong class="boldcharstyle">Include</strong> element specifies the same <strong class="boldcharstyle">Include id</strong> - for example:<p class="listcontinue"><code class="monospace">&lt;Field id="TB_A_20" name"Sender's Reference" prefix="20" mandatory="yes"&gt;</code><br /><code class="monospace">Include id="ExternalReferenceConfo"&gt;</code><br /><code class="monospace">&lt;/Field&gt;</code></p></li>
                                        </ul>
                                        <h3 class="h3internal">2. Setup without an Includes record (Confirmations)</h3>
                                        <p class="bodytext">The use of an <strong class="boldcharstyle">Includes</strong> XML Data record is optional, but it ensures that the same format is used in both the <strong class="boldcharstyle">ExternalReference</strong> block and the actual field description in the <strong class="boldcharstyle">Detail</strong> section.</p>
                                        <p class="bodytext">If you do <em class="emphasis">not</em> use an <strong class="boldcharstyle">Includes</strong> record, you must specify the identical format in each place.</p>
                                    </div>
                                    <p>&#160;</p>
                                    <p>&#160;</p>
                                    <p>&#160;</p>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>